{% extends "serene/templates/_base.html" %}
{% import "serene/templates/macros/prose.html" as macros %}

{% block page %}prose-page{% endblock page%}
{% block title %}{{ section.title }}{% endblock title %}

{% block head %}
<link id="hl" rel="stylesheet" type="text/css" href="/hl-{% if config.extra.force_theme == "dark" %}dark{% else %}light{% endif %}.css" />
{% endblock head %}

{% block content %}
<div id="wrapper">
  <main>
    {{ macros::back_link(path = get_url(path="/")) }}
    {% include "_section_title.html" %}
    <article class="prose" style="font-size: 0.9em;">
      {% for post in paginator.pages %}
        <details style="margin: 0.6em 0; border: none; padding: 0;">
          <summary style="cursor: pointer; font-size: 1.2em; font-weight: bold; margin-bottom: 0.4em; list-style: none; font-family: 'Merriweather', serif;">
            <span style="font-size: 1em; color: var(--text-pale-color); margin-right: 0.25em;">▶</span>
            {{ post.title }}
            <span style="font-size: 0.6em; font-weight: normal; color: var(--text-pale-color); margin-left: 0.5em;">{{ post.date | date(format="%b %-d, %Y") }}</span>
          </summary>
          <div class="til-content" style="margin-top: 0.75em;">
            {{ post.content | safe }}
          </div>
        </details>
      {% endfor %}
    </article>
    
    <!-- Pagination -->
    {% if paginator.number_pagers > 1 %}
    <nav class="pagination" style="margin: 2em 0; text-align: center;">
      <div style="display: flex; justify-content: space-between; align-items: center; gap: 1em;">
        {% if paginator.previous %}
          <a href="{{ paginator.previous }}" style="color: var(--primary-color); text-decoration: none;">← Previous</a>
        {% else %}
          <span style="color: var(--text-pale-color);">← Previous</span>
        {% endif %}
        
        <span style="font-size: 0.8em; color: var(--text-pale-color);">
          Page {{ paginator.current_index }} of {{ paginator.number_pagers }}
        </span>
        
        {% if paginator.next %}
          <a href="{{ paginator.next }}" style="color: var(--primary-color); text-decoration: none;">Next →</a>
        {% else %}
          <span style="color: var(--text-pale-color);">Next →</span>
        {% endif %}
      </div>
    </nav>
    {% endif %}
    
    {% include "serene/templates/_footer.html" %}
  </main>
</div>
{% endblock content %}